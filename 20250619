250619 교육일지

associationmapping

Association Mapping은 Entity 클래스 간의 관계를 매핑하는 것을 의미한다. 이를 통해 객체를 이용해 데이터베
이스의 테이블 간의 관계를 매핑할 수 있다.


1-1. 다중성에 의한 분류
연관 관계가 있는 객체 관계에서 실제로 연관을 가지는 객체의 수에 따라 분류된다.
N:1(ManyToOne) 연관 관계
Chap04. Association Mapping 2
1:N(OneToMany) 연관 관계
1:1(OneToOne) 연관 관계
N:N(ManyToMany) 연관 관계

1-2. 방향에 따른 분류
테이블의 연관 관계는 외래 키를 이용하여 양방향 연관 관계의 특징을 가진다. 참조에 의한 객체의 연관 관계는 단방
향이다. 객체간의 연관 관계를 양방향으로 만들고 싶을 경우 반대 쪽에서도 필드를 추가해서 참조를 보관하면 된다.
하지만 엄밀하게 이는 양방향 관계가 아니라 단방향 관계 2개로 볼 수 있다.
단방향 연관 관계
양방향 연관 관계
2. ManyToOne
ManyToOne 은 다대일 관계에서 사용된다. 예를 들어 하나의 카테고리가 여러 개의 메뉴를 가질 수 있는 상황에서 메
뉴 엔터티가 카테고리 엔터티를 참조하는 것이다. 이 때 메뉴 엔터티가 Many, 카테고리 엔터티가 One이 된다.


그리고 Category 엔터티를 참조하는 Menu 엔터티를 생성한다.
@JoinColumn 은 다대일 연관 관계에서 사용되는 어노테이션이다. @JoinColumn 에서 사용할 수 있는 속성들은 다음과
같다.
name : 참조하는 테이블의 컬럼명을 지정한다.
referencedColumnName : 참조되는 테이블의 컬럼명을 지정한다.
nullable : 참조하는 테이블의 컬럼에 NULL 값을 허용할지 여부를 지정한다.
unique : 참조하는 테이블의 컬럼에 유일성 제약 조건을 추가할지 여부를 지정한다.
insertable : 새로운 엔터티가 저장될 때, 이 참조 컬럼이 SQL INSERT 문에 포함될지 여부를 지정한다.
updatable : 엔터티가 업데이트될 때, 이 참조 컬럼이 SQL UPDATE 문에 포함될지 여부를 지정한다.
columnDefinition : 이 참조 컬럼에 대한 SQL DDL을 직접 지정한다.
table : 참조하는 테이블의 이름을 지정한다.
foreignKey : 참조하는 테이블에 생성될 외래 키에 대한 추가 정보를 지정한다.
@ManyToOne 은 다대일 연관 관계에서 사용되는 어노테이션이다. @ManyToOne 에서 사용할 수 있는 속성들은 다음과
같다.
cascade : 연관된 엔터티에 대한 영속성 전이를 설정한다.
fetch : 연관된 엔터티를 로딩하는 전략을 설정한다.
optional : 연관된 엔터티가 필수인지 선택적인지를 설정한다.

2-2. Entity를 통한 조회와 삽입
ManyToOneRepository
JPQL 은 Java Persistence Query Language 의 약자로, 객체 지향 쿼리 언어 중 하나이다. 객체 지향 모델에 맞게 작성
된 쿼리를 통해, 엔터티 객체를 대상으로 검색, 검색 결과를 토대로 객체를 조작할 수 있다. join 문법이 sql과는 다
소 차이가 있지만 직접 쿼리를 작성할 수 있는 문법을 제공한다. 주의할 점은 FROM절에 기술할 테이블명에는 반드
시 엔터티명이 작성되어야 한다.
