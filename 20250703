250703 교육일지

import menus from "../data/menu-detail.json"

// 메뉴 데이터 전체 조회
export function getMenuList() {
    return menus;
}

export function getMenuByMenuCode(menuCode) {

    /**
     * pathVariable menuCode를 전달 받고 있다
     * 단 주의점, URL 데이터는 문자열이다
     */
    console.log(typeof menuCode);

    /** filter : 배열에서 콜백함수가 true인 요소만 배열로 반환해준다. */
    return menus.filter(menu => menu.menuCode === parseInt(menuCode))[0];
}

// 메뉴명 전달받아 메뉴 이름을 포함하고 있는 메뉴 목록 조회
export function searchMenu(searchMenuName){

    // match() : 포함 여부에 따라 인수 값이 포함되어 있으면 객체 반환
    return menus.filter(menu => menu.menuName.match(searchMenuName))
}

'use client';
import { getMenuList } from "@/apis/MenuAPI";
import { useEffect, useState } from "react"
import boxStyle from "./Menu.module.css"
import MenuItem from "@/item/MenuItem";
import { useRouter } from "next/navigation";

export default function Menu() {

    const [menuList, setMenuList] = useState([]);
    const [searchValue, setSearchValue] = useState('');

    const router = useRouter();

    useEffect(() => {
        setMenuList(getMenuList())
    }, []
    )
    // console.log(menuList);

    const onChangeHandler = (e) => {
        setSearchValue(e.target.value);
    }

    const onClickHandler = () => {
        router.push(`/menu/search?menuName=${searchValue}`)

    }

    return (
        <>
            <h1>메뉴 페이지 입니다.</h1>
            <div>
                <input 
                    type="search"
                    name="menuName"
                    value={searchValue}
                    onChange={onChangeHandler}
                />
                <button onClick={onClickHandler}>검색</button>
            </div>
            <div className={boxStyle.MenuBox}>
                {menuList.map(menu => <MenuItem key={menu.menuCode} menu={menu}/>)}
            </div>
        </>
    )
}
